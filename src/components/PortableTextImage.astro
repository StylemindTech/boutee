---
// ./src/components/PortableTextImage.astro
import { urlForImage } from "../sanity/lib/url-for-image";
import { optimizeImageUrl } from "../lib/imageKit";

const { asset, alt } = Astro.props.node;

const url = optimizeImageUrl(urlForImage(asset).url(), 900, 70);
const webpUrl = optimizeImageUrl(urlForImage(asset).format("webp").url(), 900, 70);
---

<picture>
  <source srcset={webpUrl} type="image/webp" />
  <img class="rounded-[24px] lg:h-[589px] w-full mb-[8px]" src={url} alt={alt} />
</picture>
